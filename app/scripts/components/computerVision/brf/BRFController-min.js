function startCamera(){function e(e){function t(){0===webcam.videoWidth?setTimeout(t,100):waitForSDK()}webcam.srcObject=e,webcam.play(),e.opacity=.2,t()}window.navigator.mediaDevices.getUserMedia({video:{width:640,height:480,frameRate:30}}).then(e).catch(function(){alert("No camera available.")})}function waitForSDK(){null===brfv4&&(brfv4={locateFile:function(){return"/libraries/BRF/BRFv4_JS_trial.js.mem"}},initializeBRF(brfv4)),brfv4.sdkReady?initSDK():setTimeout(waitForSDK,100)}function initSDK(){imageData.width=webcam.videoWidth,imageData.height=webcam.videoHeight,resolution=new brfv4.Rectangle(0,0,imageData.width,imageData.height),brfManager=new brfv4.BRFManager,brfManager.init(resolution,resolution,"com.tastenkunst.brfv4.js.examples.minimal.webcam"),setInterval(trackFaces,1e3/30)}function trackFaces(){var e=imageData.getContext("2d");e.setTransform(-1,0,0,1,resolution.width,0),e.drawImage(webcam,0,0,resolution.width,resolution.height),e.setTransform(1,0,0,1,0,0),brfManager.update(e.getImageData(0,0,resolution.width,resolution.height).data);for(var t=brfManager.getFaces(),a=0;a<t.length;a++){var i=t[a];if(i.state===brfv4.BRFState.FACE_TRACKING_START||i.state===brfv4.BRFState.FACE_TRACKING){e.strokeStyle="lime";for(var r=0;r<i.vertices.length;r+=2)e.beginPath(),e.arc(i.vertices[r],i.vertices[r+1],2,0,2*Math.PI),e.stroke()}}}var webcam=document.getElementById("_webcam"),imageData=document.getElementById("_imageData"),brfManager=null,resolution=null,brfv4=null;startCamera();